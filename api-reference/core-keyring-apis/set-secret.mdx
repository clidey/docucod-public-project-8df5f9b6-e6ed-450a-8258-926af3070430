---
title: "Set Secret"
description: "Details how to securely store a secret (such as a password) in the system keyring. Includes method signature, required parameters, expected responses, request/response examples, error scenarios, and usage notes relevant to all supported operating systems."
---

# Set Secret

This page provides detailed documentation on securely storing a secret (such as a password) using the go-keyring library. The `Set` function allows you to save sensitive information in the system’s native keyring, enabling secure, cross-platform secret management. This documentation explains the method signature, required parameters, expected responses, usage examples, platform-specific constraints, and common error scenarios. It also includes practical notes applicable across all supported operating systems.

---

## Overview

The `Set` function securely stores a secret in the native keyring for a given service and user. This allows applications to avoid repeatedly prompting users for credentials by securely persisting them locally using OS-specific secure storage mechanisms.

This API abstracts the underlying platform details, seamlessly integrating with:

- **macOS Keychain** (via the `/usr/bin/security` tool)
- **Linux/BSD Secret Service API** (commonly with GNOME Keyring)
- **Windows Credential Manager**

By providing a consistent interface, `Set` enables application developers to write portable, secure credential storage without worrying about OS-specific implementation.

## Method Signature

```go
func Set(service, user, password string) error
```

### Parameters

| Name     | Type   | Description                          |
|----------|---------|------------------------------------|
| `service`| string  | Identifier for the service or app. This groups related credentials.
| `user`   | string  | Identifier for the user or account associated with the secret.
| `password` | string | The secret data to store securely (e.g., a password or token).

### Returns

- `error` — Returns `nil` on success.
  - Returns specific error values on failure (detailed below).

---

## Practical Usage

The `Set` function plays a central role in workflows needing secure credential storage. Typical scenarios include:

- Storing API credentials after a first authentication
- Saving OAuth tokens for reuse
- Retaining login passwords for CLI tools

By leveraging the native OS keyring, users gain strong encryption and system-level security with minimal code.

### Basic Example

```go
package main

import (
    "log"
    "github.com/zalando/go-keyring"
)

func main() {
    service := "my-app"
    user := "alice"
    secret := "supersecret123"

    err := keyring.Set(service, user, secret)
    if err != nil {
        log.Fatalf("Failed to set secret: %v", err)
    }
    log.Println("Secret stored successfully")
}
```

This example stores the secret `supersecret123` under service "my-app" for user "alice" in the system keyring.

### Complete Workflow Snippet

```go
// Set and verify stored secret
err := keyring.Set("example-service", "bob", "P@ssw0rd!")
if err != nil {
    log.Fatal(err)
}

secret, err := keyring.Get("example-service", "bob")
if err != nil {
    log.Fatal(err)
}

log.Printf("Retrieved secret: %s", secret)
```

---

## Platform-Specific Details and Constraints

The `Set` operation adapts to the underlying OS keyring implementation with some platform-specific considerations:

| Platform  | Keyring Backend                                | Constraints                         |
|-----------|------------------------------------------------|------------------------------------|
| macOS     | `/usr/bin/security` based keychain             | Combined length (service + user + password) should be less than ~3000 bytes.
| Linux/BSD | DBus Secret Service (`gnome-keyring`/`ksecretservice`) | No strict theoretical size limit, but very large secrets (100kB+) may degrade performance.
| Windows   | Credential Manager (via `wincred` library)     | Password ≤ 2560 bytes; service ≤ 30KB; service < 512 bytes recommended.


<Note>
If your data exceeds these size limits, `Set` will return the error `ErrSetDataTooBig`.
</Note>


---

## Error Handling

The `Set` method provides meaningful errors to help diagnose issues:

| Error Name         | Meaning                                                           | User Action / Notes                                         |
|--------------------|-------------------------------------------------------------------|-----------------------------------------------------------|
| `Nil`              | Secret was stored successfully                                    | None                                                      |
| `ErrSetDataTooBig` | The combined size or individual data exceeds OS or backend limits | Reduce the size of service name, user, or secret           |
| Other Errors       | OS-specific or underlying communication error                     | Check platform integration, permissions, dependencies      |


### Common Pitfalls

- **Oversized secrets:** Carefully consider the maximum sizes noted above, especially on Windows and macOS.
- **Service and user naming:** Use consistent and meaningful identifiers to group secrets logically.
- **Permissions:** Ensure your application has appropriate OS permissions to access and modify the keyring.

---

## Usage Notes & Best Practices

- Always handle errors returned from `Set` to detect storage failures early.
- Use service and user strings to provide clear organization; avoid overlapping service names unless intentional.
- Enforce reasonable size limits on your inputs to avoid platform-specific issues.
- Avoid storing extremely large secrets — consider external secret management systems for complex scenarios.
- Employ the mock provider (`MockInit()`) during testing to simulate keyring behavior without requiring OS keyring access.

---

## Request & Response Examples

### Request

The `Set` call involves these inputs:

- `service`: string — E.g., "github.com/myapp"
- `user`: string — E.g., "janedoe"
- `password`: string — E.g., "p@ssw0rd123"

### Response

- On success: nil error returned.
- On failure: non-nil error with expected error types.


Example in code:

```go
err := keyring.Set("my-cli-tool", "admin", "secret-password")
if err != nil {
    // Handle error
}
```

---

## Troubleshooting

<Tip>
If `Set` returns `ErrSetDataTooBig`, review the sizes of your `service`, `user`, and `password`. Trim or abbreviate them as needed.
</Tip>

<Tip>
Failure related to permissions or missing keyring backends may result in other errors. Verify that platform dependencies like `security` on macOS, `gnome-keyring` on Linux, or Credential Manager on Windows are correctly installed and configured.
</Tip>

### Common Errors Troubleshooting

| Error                 | Suggested Action                                      |
|-----------------------|-----------------------------------------------------|
| `ErrSetDataTooBig`    | Reduce secret size or keyring identifiers            |
| OS-specific permission | Run app with appropriate user permissions, re-authenticate |
| Backend not found     | Install or configure platform keyring components     |

---

## Related Documentation

- [Get Secret](/api-reference/core-keyring-apis/get-secret) — Retrieve stored secrets
- [Delete Secret](/api-reference/core-keyring-apis/delete-secret) — Remove secrets from the keyring
- [Mock Provider for Testing](/api-reference/platform-and-testing-apis/mock-provider) — Use mock implementations for tests
- [Platform Integration & Dependencies](/overview/architecture-usecases-integration/platform-integration) — Understand OS backend requirements
- [Troubleshooting & Common Setup Issues](/getting-started/usage-validation/troubleshooting) — Fix common environment problems

---

## Summary

| Section                 | Description                                  |
|-------------------------|----------------------------------------------|
| Overview                | Purpose and value of `Set` for storing secrets securely                   |
| Method Signature        | `func Set(service, user, password string) error` definition and usage      |
| Practical Usage         | Common workflows, example code snippets                  |
| Platform Constraints    | OS-specific details and limits on input sizes                     |
| Error Handling          | Expected errors and troubleshooting tips                            |
| Usage Notes            | Best practices for secret management                           |
| Request/Response Examples | How to call the API with sample data and expected outcomes      |
| Troubleshooting          | Tips for fixing common failures                               |
| Related Documentation    | Links to connected concepts and API methods                    |

---

By following this guide, you will confidently implement secret storage in your Go applications using the `Set` function of go-keyring, achieving secure and cross-platform password management with minimal effort.
